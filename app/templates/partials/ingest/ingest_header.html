<!-- REM: app/templates/partials/ingest/ingest_header.html @2025-07-18 00:00 UTC +9 -->
<div id="ingest-header" style="display: flex; flex-direction: column; gap:0.2em;">
  <!-- REM: モード切替（フォルダ or ファイル） -->
  <div style="display: flex; align-items: center; gap:1em;">
    <label>
      <input type="radio" name="input_mode" value="folder" checked>
      フォルダ指定（<input type="checkbox" id="include-subdirs" name="include_subdirs" checked> サブフォルダも含める）
    </label>
    <label>
      <input type="radio" name="input_mode" value="files">
      ファイル指定
    </label>
  </div>

  <!-- REM: フォルダ選択（初期表示） -->
  <div id="folder-mode" style="display: flex; align-items: center; gap: 0.5em; margin-left: 1.5em;">
    <label for="input-folder" style="min-width: 140px;">処理対象フォルダ：</label>
    <div style="display: flex; align-items: center; gap: 8px; flex: 1;">
      <textarea id="input-folder" name="input_folder" readonly
                style="width: 300px; min-width: 200px; max-width: 600px; height: 1.5em; resize: horizontal; 
                       padding: 4px 8px; box-sizing: border-box; font-family: inherit; font-size: inherit; 
                       line-height: 1.2; overflow: hidden; vertical-align: top;"
                >ignored/input_files</textarea>
      <button type="button" id="browse-folder" 
              style="padding: 4px 8px; flex-shrink: 0; height: 2em;">📂</button>
    </div>
  </div>

  <!-- REM: ファイル選択（非表示） -->
  <div id="files-mode" style="display:none; flex-direction: column; gap: 0.2em; margin-left: 1.5em;">
    <div style="display: flex; align-items: center; gap: 0.5em;">
      <label for="selected-files-display" style="min-width: 140px;">処理対象ファイル：</label>
      <div style="display: flex; align-items: flex-start; gap: 4px; flex: 1;">
        <textarea id="selected-files-display" readonly
          placeholder="ファイルを選択してください"
          style="flex: 1; min-height: 3em; resize: both; box-sizing: border-box; 
                 padding: 4px 8px; font-family: inherit; font-size: inherit; 
                 line-height: 1.2; border: 1px solid #ccc; border-radius: 3px;"></textarea>
        <button type="button" id="browse-files" 
                style="background: #ffc107; border: 1px solid #ffc107; color: #212529; 
                       border-radius: 3px; width: 32px; height: 32px; flex-shrink: 0; 
                       display: flex; align-items: center; justify-content: center; 
                       cursor: pointer; font-size: 16px;">📂</button>
      </div>
    </div>
    <input type="file" id="input-files" name="input_files" multiple style="display: none;">
  </div>
</div>

{% include "partials/ingest/folder_modal.html" %}