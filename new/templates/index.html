{% extends "base.html" %}

{% block title %}ãƒ›ãƒ¼ãƒ  - æ–°ã—ã„RAGã‚·ã‚¹ãƒ†ãƒ {% endblock %}

{% block content %}
<div class="hero">
    <div class="container">
        <h1 class="hero-title">æ–°ã—ã„RAGã‚·ã‚¹ãƒ†ãƒ </h1>
        <p class="hero-subtitle">ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆã«åŸºã¥ãæ—¥æœ¬èªæ–‡æ›¸å‡¦ç†ã‚·ã‚¹ãƒ†ãƒ </p>
        
        <div class="hero-actions">
            <a href="/chat" class="btn btn-primary btn-lg">ãƒãƒ£ãƒƒãƒˆã‚’é–‹å§‹</a>
            <a href="/upload" class="btn btn-outline btn-lg">ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</a>
        </div>
    </div>
</div>

<div class="features">
    <div class="container">
        <h2 class="section-title">ä¸»ãªæ©Ÿèƒ½</h2>
        
        <div class="feature-grid">
            <div class="feature-card">
                <div class="feature-icon">ğŸ“„</div>
                <h3>å¤šå½¢å¼æ–‡æ›¸å¯¾å¿œ</h3>
                <p>PDFã€Wordã€ãƒ†ã‚­ã‚¹ãƒˆã€CSVã€JSONã€EMLãƒ•ã‚¡ã‚¤ãƒ«ã®å‡¦ç†ã«å¯¾å¿œ</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">ğŸ”</div>
                <h3>é«˜ç²¾åº¦OCR</h3>
                <p>è¤‡æ•°ã®OCRã‚¨ãƒ³ã‚¸ãƒ³ã«ã‚ˆã‚‹é«˜ç²¾åº¦ãªãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">ğŸ¤–</div>
                <h3>LLMæ•´å½¢</h3>
                <p>Ollamaã‚’ä½¿ç”¨ã—ãŸæ—¥æœ¬èªãƒ†ã‚­ã‚¹ãƒˆã®å“è³ªå‘ä¸Š</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">ğŸ”</div>
                <h3>ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢</h3>
                <p>è¤‡æ•°ã®åŸ‹ã‚è¾¼ã¿ãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã‚‹é«˜ç²¾åº¦æ¤œç´¢</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">âš¡</div>
                <h3>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‡¦ç†</h3>
                <p>SSEã«ã‚ˆã‚‹é€²æ—è¡¨ç¤ºã¨ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‡¦ç†</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">ğŸ”’</div>
                <h3>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ</h3>
                <p>HTTPSå¯¾å¿œã€èªè¨¼ã€APIåˆ†é›¢ã«ã‚ˆã‚‹ã‚»ã‚­ãƒ¥ã‚¢ãªè¨­è¨ˆ</p>
            </div>
        </div>
    </div>
</div>

<div class="stats">
    <div class="container">
        <h2 class="section-title">ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ³</h2>
        
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number" id="file-count">-</div>
                <div class="stat-label">ç™»éŒ²ãƒ•ã‚¡ã‚¤ãƒ«æ•°</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-number" id="session-count">-</div>
                <div class="stat-label">ãƒãƒ£ãƒƒãƒˆã‚»ãƒƒã‚·ãƒ§ãƒ³æ•°</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-number" id="embedding-count">-</div>
                <div class="stat-label">åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«æ•°</div>
            </div>
        </div>
    </div>
</div>

<script>
// ã‚·ã‚¹ãƒ†ãƒ çµ±è¨ˆã®å–å¾—
async function loadStats() {
    try {
        const [filesResponse, sessionsResponse] = await Promise.all([
            fetch('/api/files', { credentials: 'include' }),
            fetch('/api/chat/sessions', { credentials: 'include' })
        ]);
        
        if (filesResponse.ok) {
            const filesData = await filesResponse.json();
            document.getElementById('file-count').textContent = filesData.data.length;
        }
        
        if (sessionsResponse.ok) {
            const sessionsData = await sessionsResponse.json();
            document.getElementById('session-count').textContent = sessionsData.data.length;
        }
        
        // åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«æ•°ã¯ä»®ã®å€¤
        document.getElementById('embedding-count').textContent = '0';
        
    } catch (error) {
        console.error('çµ±è¨ˆå–å¾—ã‚¨ãƒ©ãƒ¼:', error);
    }
}

// ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«çµ±è¨ˆã‚’å–å¾—
document.addEventListener('DOMContentLoaded', loadStats);
</script>
{% endblock %} 