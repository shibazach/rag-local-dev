修正内容
1. PDFドロップ問題の修正
・ドキュメント全体でドラッグ&ドロップのデフォルト動作を無効化
・preventDefault()とstopPropagation()を全てのドラッグイベントに追加
・これによりPDFファイルが別タブで開く問題を解決

2. ファイルアップロード機能の修正
・JavaScript側のdisplayResults関数とPython側の_show_resultsメソッドの連携を修正
・隠しinput要素を使用してJavaScriptからPythonへデータを送信する仕組みを実装
・結果データはJSON形式で送信され、Python側で適切に処理される

3. フォルダアップロード機能の修正
・フォルダ選択時のパス転記機能を修正
・ローカル/サーバー両方のフォルダ選択で同じ仕組みを使用
・隠しinput要素経由でフォルダパスをPython側に送信

技術的な改善点
1.NiceGUI準拠の通信方式：
・WebSocketやpywebviewに依存しない方法を採用
・隠しinput要素のvalue-changeイベントを使用してJavaScript→Python通信を実現

2.エラーハンドリング：
・JavaScript側でのエラーチェックを強化
・配列でないデータが渡された場合の処理を追加

3.コード構造の改善：
・f-string内の中括弧エスケープ問題を回避するため、通常の文字列連結を使用
・JavaScriptコードの可読性を向上

動作確認
サーバーが正常に起動し、/uploadページが正しく表示されることを確認しました。
これで、以下の機能が正常に動作するはずです：
・ファイル選択ボタンからのアップロード
・ドラッグ&ドロップでのアップロード（PDFが別タブで開かない）
・フォルダ選択とパスの自動転記
・アップロード処理の実行と結果表示

